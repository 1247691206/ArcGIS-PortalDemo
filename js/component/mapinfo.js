define(["dojo/_base/declare","dojo/_base/lang","esri/dijit/Legend","esri/geometry/Extent","dojo/text!esricdTmpl/mapinfo/baseinfo.html","dojo/text!esricdTmpl/mapinfo/layersinfo.html"],function(e,t,a,n,r,i){return e(null,{app:null,constructor:function(e){this.app=e,this.bindDomEvents()},startup:function(){console.log("startup"),this.initLegend(),this.initBaseinfo(),this.initLayersinfo(),this.initOpacitySlider()},bindDomEvents:function(){$("#mapInfoPanel").delegate("input[data-layerid]","click",$.proxy(function(e){var t=$(e.currentTarget).attr("data-layerid"),a=$(e.currentTarget).is(":checked");this.app.map.getLayer(t).setVisibility(a)},this)),$("#mapInfoPanel").delegate("[node-type=menuZoomto]","click",$.proxy(function(e){var t=$(e.currentTarget).attr("data-oplayerIndex"),a=this.app.config.itemInfo.itemData.operationalLayers[t],r=a.resourceInfo.fullExtent,i=new n(r);this.app.map.setExtent(i,!0)},this)),$("#mapInfoPanel").delegate("[node-type=menuDataTable]","click",$.proxy(function(e){var t=$(e.currentTarget).attr("data-layerUrl");this.app.dataTable.showLayerData(t)},this)),$("#mapInfoPanel").delegate("[node-type=reorderLayer]","click",$.proxy(function(e){var t=$(e.currentTarget).attr("data-dir"),a=$(e.currentTarget).parents("[node-type=reorderableLayer]");"up"==t?($prev=a.prev(),$prev.before(a),this.reorderLayerByDomOrder()):"down"==t&&($next=a.next(),$next.after(a),this.reorderLayerByDomOrder())},this))},reorderLayerByDomOrder:function(){var e=$("#mapInfoPanel #layersInfoDiv .reorderableLayer");e.each($.proxy(function(t,a){var n=e.length-t,r=$(a).attr("data-layerid"),i=this.app.map.getLayer(r);this.app.map.reorderLayer(i,n)},this))},initOpacitySlider:function(){$("#mapInfoPanel [node-type=jqSlider]").slider({max:1,min:0,step:.01}),$("#mapInfoPanel [node-type=jqSlider]").on("slide",$.proxy(function(e,t){var a=$(e.currentTarget).attr("data-layerid"),n=t.value,r=this.app.map.getLayer(a);r.setOpacity(1-n)},this))},initLegend:function(){var e=new a({map:this.app.map},"legendDiv");e.startup()},initBaseinfo:function(){var e=this.app.config.itemInfo.item.title;$("#mapInfoPanel #baseInfoTitle").html(e);var t=baidu.template(r,this.app.config.itemInfo.item);$("#mapInfoPanel #baseInfoDiv").html(t)},initLayersinfo:function(){var e=baidu.template(i,this.app.config.itemInfo.itemData);$("#mapInfoPanel #layersInfoDiv").html(e)},test:""})});